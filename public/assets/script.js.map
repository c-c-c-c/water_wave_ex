{"version":3,"sources":["../../src/script/script.js"],"names":["N","l","dt","dd","v","controls","texture","step","geometrys","BC","peakPosition","x","y","z","sigma2","peakPosition_bound","x_min","x_max","y_min","y_max","z_min","z_max","sigma2_min","sigma2_max","restartFlag","stopFlag","Tn","f","Array","initialCondition","parameter","x0","y0","z0","t","i","j","Math","exp","pow","window","addEventListener","resizeTo","threeStart","initThree","initCamera","initLight","initObject","renderer","scene","canvasFrame","document","getElementById","THREE","WebGLRenderer","antialias","alert","setSize","clientWidth","clientHeight","appendChild","domElement","Scene","camera","PerspectiveCamera","position","set","up","lookAt","OrbitControls","directionalLight","ambientLight","DirectionalLight","AmbientLight","add","axis","lattice","cubes","Geometry","vertices","push","Vector3","ii","faces","Face3","computeFaceNormals","computeVertexNormals","loader","TextureLoader","load","tex","material","MeshPhongMaterial","color","side","DoubleSide","specular","shininess","minFilter","LinearFilter","Mesh","geometry","CubeGeometry","transparent","opacity","rotation","PI","loop","update","needsUpdate","time","a","normalsNeedUpdate","verticesNeedUpdate","clear","render","remove","requestAnimationFrame"],"mappings":"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","file":"script.js","sourcesContent":["/*\n「四角形オブジェクト100×100_ガウシアン_枠_時間発展_.html」をベースとして\n*/\n\t////////////////////////////////////////////////////////////////////\n\t// 物理系の定義\n\t////////////////////////////////////////////////////////////////////\n\t//２次元正方格子のサイズ\n\tvar N = 100;\n\tvar l = 1.0;\n\n\t//var dt = 0.1; //時間間隔\n\tvar dt = 0.1; //時間間隔\n\tvar dd = 1.0; //空間間隔\n\tvar v = 4;    //速度\n\tlet controls;\n\tlet texture;\n\tvar step = 0; //ステップ数\n\tvar geometrys;\n\n\t//境界条件の設定\n\t//var BC = \"Neumann\"; //or \"Dirichlet\"\n\tvar BC =  \"Dirichlet\" ;\n\n\tvar peakPosition = { x: 0, y: 0, z: 100, sigma2: 30 };\n\tvar peakPosition_bound = { x_min: -50, x_max: 50, y_min: -50, y_max: 50, z_min: -50, z_max: 100, sigma2_min: 10, sigma2_max: 100 };\n\n\t//一時停止フラグ\n\tvar restartFlag = false; //再計算フラグ\n\tvar stopFlag = false;     //一時停止フラグ\n\n\tvar Tn = 3;\n\tvar f = new Array(Tn);\n\n\tfunction initialCondition(parameter) {\n\t\tvar x0 = parameter.x;\n\t\tvar y0 = parameter.y;\n\t\tvar z0 = parameter.z;\n\t\tvar sigma2 = parameter.sigma2;\n\t\tfor (var t = 0; t < Tn; t++) {\n\t\t\tf[t] = new Array(N);\n\t\t\tfor (i = 0; i <= N; i++) {\n\t\t\t\tf[t][i] = new Array(N);\n\t\t\t\tfor (j = 0; j <= N; j++) {\n\t\t\t\t\tvar x = (-N / 2 + i) * l;\n\t\t\t\t\tvar y = (-N / 2 + j) * l;\n\t\t\t\t\t//初期条件を与える\n\t\t\t\t\tvar z = z0 * Math.exp(-(Math.pow(x-x0, 2) + Math.pow(y-y0, 2)) / (2*sigma2));\n\t\t\t\t\tf[0][i][j] = z;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (var i = 1; i <= N - 1; i++) {\n\t\t\tfor (var j = 1; j <= N - 1; j++) {\n\t\t\t\tf[1][i][j] = f[0][i][j] + v * v / 2.0 * dt * dt / (dd * dd) * (f[0][i + 1][j] + f[0][i - 1][j] + f[0][i][j + 1] + f[0][i][j - 1] - 4.0 * f[0][i][j]);\n\t\t\t}\n\t\t}\n\t\tif (BC == \"Dirichlet\") {\n\t\t\t//ディリクレ境界条件\n\t\t\tfor (var i = 0; i <= N; i++) {\n\t\t\t\tf[1][i][0] = f[1][i][N] = f[1][0][i] = f[1][N][i] = 0.0; //境界条件\n\t\t\t}\n\t\t} else if (BC == \"Neumann\") {\n\t\t\t//ノイマン境界条件\n\t\t\tfor (var i = 1; i <= N-1; i++) {\n\t\t\t\tf[1][i][0] = f[1][i][1];\n\t\t\t\tf[1][i][N] = f[1][i][N - 1];\n\t\t\t\tf[1][0][i] = f[1][1][i];\n\t\t\t\tf[1][N][i] = f[1][N - 1][i];\n\t\t\t}\n\t\t\t//角の処理\n\t\t\tf[1][0][0] = (f[1][0][1] + f[1][1][0]) / 2;\n\t\t\tf[1][0][N] = (f[1][0][N-1] + f[1][1][N]) / 2;\n\t\t\tf[1][N][0] = (f[1][N-1][0] + f[1][N][1]) / 2;\n\t\t\tf[1][N][N] = (f[1][N-1][N] + f[1][N][N-1]) / 2;\n\t\t}\n\t}\n\n\t////////////////////////////////////////////////////////////////////\n\t// windowイベントの定義\n\t////////////////////////////////////////////////////////////////////\n\twindow.addEventListener(\"load\", function () {\n\t\tresizeTo(516, 538);\n\t\tinitialCondition(peakPosition);\n\t\tthreeStart(); //Three.jsのスタート関数の実行\n\t});\n\n\n\t////////////////////////////////////////////////////////////////////\n\t// Three.jsスタート関数の定義\n\t////////////////////////////////////////////////////////////////////\n\tfunction threeStart() {\n\t\tinitThree();  //Three.js初期化関数の実行\n\t\tinitCamera(); //カメラ初期化関数の実行\n\t\tinitLight();  //光源初期化関数の実行\n\t\tinitObject(); //オブジェクト初期化関数の実行 //内部でloop\n\n\t}\n\t////////////////////////////////////////////////////////////////////\n\t// Three.js初期化関数の定義\n\t////////////////////////////////////////////////////////////////////\n\t//グローバル変数の宣言\n\tvar renderer,    //レンダラーオブジェクト\n\t    scene,       //シーンオブジェクト\n\t    canvasFrame; //キャンバスフレームのDOM要素\n\tfunction initThree() {\n\t\t//キャンバスフレームDOM要素の取得\n\t\tcanvasFrame = document.getElementById('canvas-frame');\n\t\t//レンダラーオブジェクトの生成\n\t\trenderer = new THREE.WebGLRenderer({ antialias: true });\n\t\tif (!renderer) alert('Three.js の初期化に失敗しました');\n\t\t//レンダラーのサイズの設定\n\t\trenderer.setSize(canvasFrame.clientWidth, canvasFrame.clientHeight);\n\t\t//キャンバスフレームDOM要素にcanvas要素を追加\n\t\tcanvasFrame.appendChild(renderer.domElement);\n\n\t\t//レンダラークリアーカラーの設定\n\t\t//renderer.setClearColorHex(0x000000, 1.0);\n\n\t\t//シーンオブジェクトの生成\n\t\tscene = new THREE.Scene();\n\t}\n\t////////////////////////////////////////////////////////////////////\n\t// カメラ初期化関数の定義\n\t////////////////////////////////////////////////////////////////////\n\t//グローバル変数の宣言\n\tvar camera;    //カメラオブジェクト\n\tfunction initCamera() {\n\t\t//カメラオブジェクトの生成\n\t\tcamera = new THREE.PerspectiveCamera(45, canvasFrame.clientWidth / canvasFrame.clientHeight, 1, 10000);\n\t\t//カメラの位置の設定\n\t\tcamera.position.set(160, 0, 200);\n\t\t//カメラの上ベクトルの設定\n\t\tcamera.up.set(0, 0, 1);\n\t\t//カメラの中心位置ベクトルの設定\n\t\tcamera.lookAt({ x: 0, y: 0, z: 0 }); //トラックボール利用時は自動的に無効\n\n\t\t//トラックボールオブジェクトの宣言\n\t\t//trackball = new THREE.TrackballControls(camera, canvasFrame);\n\t\t//controls\n\t  controls = new THREE.OrbitControls(camera);\n\t\t//トラックボール動作範囲のサイズとオフセットの設定\n\t\t// trackball.screen.width = canvasFrame.clientWidth;                        //横幅\n\t\t// trackball.screen.height = canvasFrame.clientHeight;                      //縦幅\n\t\t// trackball.screen.offsetLeft = canvasFrame.getBoundingClientRect().left;  //左オフセット\n\t\t// trackball.screen.offsetTop = canvasFrame.getBoundingClientRect().top;    //右オフセット\n\n\t\t//トラックボールの回転無効化と回転速度の設定\n\t\t// trackball.noRotate = false;\n\t\t// trackball.rotateSpeed = 2.0;\n    //\n\t\t// //トラックボールの拡大無効化と拡大速度の設定\n\t\t// trackball.noZoom = false;\n\t\t// trackball.zoomSpeed = 1.0;\n    //\n\t\t// //トラックボールのカメラ中心移動の無効化と中心速度の設定\n\t\t// trackball.noPan = false;\n\t\t// trackball.panSpeed = 1.0;\n\t\t// trackball.target = new THREE.Vector3(0, 0, 10);\n    //\n\t\t// //トラックボールのスタティックムーブの有効化\n\t\t// trackball.staticMoving = true;\n\t\t// //トラックボールのダイナミックムーブ時の減衰定数\n\t\t// trackball.dynamicDampingFactor = 0.3;\n\t}\n\t////////////////////////////////////////////////////////////////////\n\t// 光源初期化関数の定義\n\t////////////////////////////////////////////////////////////////////\n\t//グローバル変数の宣言\n\tvar directionalLight,  //平行光源オブジェクト\n\t    ambientLight;      //環境光オブジェクト\n\tfunction initLight() {\n\t\t//平行光源オブジェクトの生成\n\t\tdirectionalLight = new THREE.DirectionalLight(0xDDDDDD, 1.0, 0);\n\t\t//平行光源オブジェクトの位置の設定\n\t\tdirectionalLight.position.set(30, 30, 100);\n\n\t\t//環境光オブジェクトの生成\n\t\tambientLight = new THREE.AmbientLight(0x222222);\n\t\t//環境光オブジェクトのシーンへの追加\n\t\tscene.add(ambientLight);\n\n\t\t//平行光源オブジェクトのシーンへの追加\n\t\tscene.add(directionalLight);\n\t}\n\t////////////////////////////////////////////////////////////////////\n\t// オブジェクト初期化関数の定義\n\t////////////////////////////////////////////////////////////////////\n\t//グローバル変数の宣言\n\tvar axis, //軸オブジェクト\n\t    lattice={},  //２次元格子オブジェクト\n\t\t\tcubes = [];  //立方体オブジェクト\n\tfunction initObject() {\n/*\n\t\t//軸オブジェクトの生成\n\t\taxis = new THREE.AxisHelper(100);\n\t\t//軸オブジェクトのシーンへの追加\n\t\tscene.add(axis);\n\t\t//軸オブジェクトの位置座標を設定\n\t\taxis.position.set(0, 0, 0);\n*/\n\t\t//初期条件\n\t\tinitialCondition(peakPosition);\n\n\t\t//形状オブジェクトの宣言と生成\n\t\tgeometrys = new THREE.Geometry();\n\t\t//一片の長さ\n\t\tfor (var i = 0; i <= N; i++) {\n\t\t\tfor (var j = 0; j <= N; j++) {\n\t\t\t\tvar x = (-N / 2 + i) * l;\n\t\t\t\tvar y = (-N / 2 + j) * l;\n\t\t\t\t//初期条件を与える\n\t\t\t\tvar z = f[0][i][j];\n\t\t\t\t//頂点座標データの追加\n\t\t\t\tgeometrys.vertices.push(new THREE.Vector3(x, y, z));\n\t\t\t}\n\t\t}\n\t\t// for (i = 0; i < N; i++) {\n\t\t// \tfor (j = 0; j < N; j++) {\n\t\t// \t\tvar ii = (N + 1) * i + j;\n\t\t// \t\t//面指定用頂点インデックスを追加\n\t\t// \t\tgeometrys.faces.push(new THREE.Face3(ii, ii + (N + 1), ii + (N + 1) + 1, ii + 1));\n\t\t// \t}\n\t\t// }\n\n\t\tfor (var i = 0; i < N; i++) {\n\t\t\tfor (var j = 0; j < N; j++) {\n\t\t\t\t//頂点番号\n\t\t\t\tvar ii = (N + 1) * i + j;\n\t\t\t\t//面指定用頂点インデックスを追加\n\t\t\t\tgeometrys.faces.push( new THREE.Face3( ii, ii + (N + 1), ii + (N + 1) +1) );\n\t\t\t\t//面指定用頂点インデックスを追加\n\t\t\t\tgeometrys.faces.push( new THREE.Face3( ii, ii + (N + 1) + 1, ii + 1 ) );\n\t\t\t}\n\t\t}\n\n\n\n\t\t//面の法線ベクトルを計算\n\t\tgeometrys.computeFaceNormals();\n\t\t//面の法線ベクトルから頂点法線ベクトルの計算\n\t\tgeometrys.computeVertexNormals();\n\n\t\t//材質オブジェクトの宣言と生成\n\t\tlet loader = new THREE.TextureLoader();\n\t\t//loader.load('./public/img/italy.jpg' , (tex)=> {\n\t\tloader.load('./public/img/yoko.jpg' , (tex)=> {\n\n\t\t\tvar material = new THREE.MeshPhongMaterial({ color: 0xafeeee,  side: THREE.DoubleSide, specular: 0xffffff, shininess: 250 });\n\t\t\t//var material = new THREE.MeshBasicMaterial({ color: 0xafeeee,  side: THREE.DoubleSide, specular: 0xffffff, shininess: 250 });\n\t\t\ttexture = tex;\n\t\t\t//var material = new THREE.MeshPhongMaterial({ map: texture,  side: THREE.DoubleSide});\n\t\t\ttexture.minFilter = THREE.LinearFilter;\n\t\t\t//立方体オブジェクトの生成\n\t\t\tlattice = new THREE.Mesh(geometrys, material);\n\t\t\t//形状オブジェクトの宣言と生成\n\t\t\tvar geometry = new THREE.CubeGeometry(1, 101, 30);\n\t\t\t//材質オブジェクトの宣言と生成F\n\t\t\tvar material = new THREE.MeshPhongMaterial({ color: 0xFFFFFF,  specular: 0xffffff, shininess: 100, transparent: true, opacity: 0.2 });\n\n\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t//立方体オブジェクトの生成\n\t\t\t\tcubes[i] = new THREE.Mesh(geometry, material);\n\t\t\t\t//立方体オブジェクトのシーンへの追加\n\t\t\t\tscene.add(cubes[i]);\n\t\t\t}\n\t\t\t//立方体オブジェクトの位置座標を設定\n\t\t\tcubes[0].position.set(50, 0, 15);\n\t\t\tcubes[1].position.set(-50, 0, 15);\n\t\t\tcubes[2].position.set(0, 50, 15);\n\t\t\tcubes[2].rotation.set(0, 0, Math.PI / 2);\n\t\t\tcubes[3].position.set(0, -50, 15);\n\t\t\tcubes[3].rotation.set(0, 0, Math.PI / 2);\n\n\t\t\t// const d1 = new Date();\n\t\t\t// while (true) {\n\t\t\t// \tlet d2 = new Date();\n\t\t\t// \tif (d2 - d1 > 5000) {\n\t\t\t// \t\tbreak;\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\tloop();       //無限ループ関数の実行\n\t\t});\n\t}\n\t////////////////////////////////////////////////////////////////////\n\t// 無限ループ関数の定義\n\t////////////////////////////////////////////////////////////////////\n\t//グローバル変数の宣言\n\n\n\tfunction loop() {\n\t\t//トラックボールによるカメラオブジェクトのプロパティの更新\n\t\tcontrols.update();\n\t\ttexture.needsUpdate = true;\n\n\t\t//時刻の取得\n\t\tvar time = step * dt;\n\t\t//時間発展\n\t\tif (stopFlag == false) {\n\t\t\t//ステップ数のインクリメント\n\t\t\tstep++;\n\t\t\ttime = step * dt;\n\t\t\tfor (var i = 1; i <= N - 1; i++) {\n\t\t\t\tfor (var j = 1; j <= N - 1; j++) {\n\t\t\t\t\tf[2][i][j] = 2.0 * f[1][i][j] - f[0][i][j] + v * v * dt * dt / (dd * dd) * (f[1][i + 1][j] + f[1][i - 1][j] + f[1][i][j + 1] + f[1][i][j - 1] - 4.0 * f[1][i][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (BC == \"Dirichlet\") {\n\t\t\t\t//ディリクレ境界条件\n\t\t\t\tfor (var i = 0; i <= N; i++) {\n\t\t\t\t\tf[2][i][0] = f[2][i][N] = f[2][0][i] = f[2][N][i] = 0.0;    //境界条件\n\t\t\t\t}\n\t\t\t} else if (BC == \"Neumann\") {\n\t\t\t\t//ノイマン境界条件\n\t\t\t\tfor (var i = 1; i <= N-1; i++) {\n\t\t\t\t\tf[2][i][0] = f[2][i][1];\n\t\t\t\t\tf[2][i][N] = f[2][i][N - 1];\n\t\t\t\t\tf[2][0][i] = f[2][1][i];\n\t\t\t\t\tf[2][N][i] = f[2][N - 1][i];\n\t\t\t\t}\n\t\t\t\t//角の処理\n\t\t\t\tf[2][0][0] = (f[2][0][1] + f[2][1][0]) / 2;\n\t\t\t\tf[2][0][N] = (f[2][0][N - 1] + f[2][1][N]) / 2;\n\t\t\t\tf[2][N][0] = (f[2][N - 1][0] + f[2][N][1]) / 2;\n\t\t\t\tf[2][N][N] = (f[2][N - 1][N] + f[2][N][N - 1]) / 2;\n\n\t\t\t}\n\t\t\t//次の計算のために配列の数値を入れかえる。ここで過去の情報は失われる。\n\t\t\tfor (var i = 0; i <= N; i++) {\n\t\t\t\tfor (var j = 0; j <= N; j++) {\n\t\t\t\t\tf[0][i][j] = f[1][i][j];\n\t\t\t\t\tf[1][i][j] = f[2][i][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tvar a = 0;\n\t\tfor (i = 0; i <= N; i++) {\n\t\t\tfor (j = 0; j <= N; j++) {\n\t\t\t\tvar x = (-N / 2 + i) * l;\n\t\t\t\tvar y = (-N / 2 + j) * l;\n\t\t\t\tvar z = f[1][i][j];\n\t\t\t\t//頂点座標データの追加\n\t\t\t\t//console.log(lattice.geometry.vertices);\n\t\t\t\tlattice.geometry.vertices[a].z = z;\n\t\t\t\ta++;\n\t\t\t}\n\t\t}\n\n\t\tlattice.geometry.normalsNeedUpdate = true;\n\t\tlattice.geometry.verticesNeedUpdate = true;\n\t\t//面の法線ベクトルを計算\n\t\tlattice.geometry.computeFaceNormals();\n\t\t//面の法線ベクトルから頂点法線ベクトルの計算\n\t\tlattice.geometry.computeVertexNormals();\n\n\t\t//立方体オブジェクトのシーンへの追加\n\t\tscene.add(lattice);\n\n\t\t//クリアーカラーで初期化\n\t\trenderer.clear();\n\t\t//レンダリング\n\t\trenderer.render(scene, camera);\n\t\tscene.remove(lattice);\n\n\t\t//「loop()」関数の呼び出し\n\t\trequestAnimationFrame(loop);\n\t}\n"]}